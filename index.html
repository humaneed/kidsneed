<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <meta name="theme-color" content="#4A7C91" />
  <meta name="description" content="Kidsneed ‚Äì kinderfreundlicher Lern-Hub f√ºr Grundschule Klasse 1‚Äì4" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <title>Kidsneed ‚Äì Grundschule 1‚Äì4</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@600;800;900&display=swap" rel="stylesheet">

  <style>
    :root {
      --s-1: 8px;
      --s-2: 16px;
      --s-3: 24px;
      --s-4: 32px;
      --s-5: 48px;

      --radius-md: 16px;
      --radius-lg: 24px;
      --radius-xl: 28px;
      --shadow-soft: 0 2px 10px rgba(45,42,38,.10);
      --shadow-subtle: 0 1px 3px rgba(45,42,38,.06);

      --bg-canvas: #F5F0E8;
      --bg-card: #FFFFFF;
      --bg-muted: #EDE8DC;

      --ink-primary: #2D2A26;
      --ink-secondary: #6B665C;
      --ink-light: #9C9588;

      --accent-math: #4A7C91;
      --accent-deu: #C4726C;
      --accent-world: #7BA08A;
      --accent-logic: #8B7BA0;
      --accent-crea: #D4A574;
      --accent-tools: #7D9B8F;

      --text-2xl: 24px;
      --text-xl: 20px;
      --text-md: 16px;
      --text-sm: 14px;
      --text-xs: 12px;

      --motion-fast: 150ms;
      --motion-base: 260ms;
      --ease-out: cubic-bezier(0.33, 1, 0.68, 1);

      --app-max-w: 560px;
      --font: 'Nunito', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: var(--bg-canvas);
      color: var(--ink-primary);
      font-family: var(--font);
      font-weight: 600;
      font-size: var(--text-md);
      line-height: 1.5;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    *:focus-visible {
      outline: 3px solid var(--accent-math);
      outline-offset: 2px;
      border-radius: 12px;
    }

    @media (prefers-reduced-motion: reduce) {
      * { transition-duration: 0.01ms !important; animation-duration: 0.01ms !important; }
    }

    #app-frame {
      width: 100%;
      height: 100%;
      background: var(--bg-card);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      position: relative;
    }

    @media (min-width: 520px) {
      body { padding: var(--s-3); }
      #app-frame {
        max-width: var(--app-max-w);
        height: 94dvh;
        max-height: 920px;
        border: 3px solid var(--ink-primary);
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-subtle);
      }
    }

    /* ===== HEADER ===== */
    header {
      height: 72px;
      padding: 0 var(--s-3);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: var(--s-2);
      border-bottom: 3px solid var(--ink-primary);
      background: var(--bg-card);
      flex: 0 0 auto;
    }

    .brand { display: flex; flex-direction: column; gap: 2px; min-width: 0; }
    .brand-title {
      font-size: var(--text-xl);
      font-weight: 900;
      letter-spacing: -0.02em;
      line-height: 1.1;
    }
    .brand-subtitle {
      font-size: var(--text-xs);
      font-weight: 900;
      text-transform: uppercase;
      letter-spacing: 0.10em;
      color: var(--ink-secondary);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .top-actions { display: flex; gap: var(--s-2); align-items: center; }

    .pill {
      min-height: 48px;
      padding: 10px 12px;
      border-radius: 12px;
      border: 2px solid var(--ink-primary);
      background: var(--bg-muted);
      display: flex;
      align-items: center;
      gap: 8px;
      user-select: none;
      cursor: pointer;
      transition: transform var(--motion-fast) var(--ease-out), box-shadow var(--motion-fast) var(--ease-out);
    }
    .pill:hover { box-shadow: var(--shadow-soft); transform: translateY(-1px); }
    .pill:active { transform: scale(0.98); box-shadow: none; }
    .pill .icon { font-size: 18px; }
    .pill .val { font-weight: 900; font-size: var(--text-sm); }

    /* ===== VIEWPORT ===== */
    .viewport {
      flex: 1;
      overflow: auto;
      padding: var(--s-3);
      background:
        radial-gradient(1200px 340px at 50% 0%, rgba(74,124,145,.10), transparent 60%),
        var(--bg-card);
      overscroll-behavior: contain;
      -webkit-overflow-scrolling: touch;
    }

    /* ===== HERO ===== */
    .hero {
      border: 3px solid var(--ink-primary);
      border-radius: var(--radius-xl);
      padding: var(--s-4) var(--s-3);
      box-shadow: var(--shadow-subtle);
      background: linear-gradient(180deg, rgba(237,232,220,.55), rgba(255,255,255,1));
      animation: fadeIn var(--motion-base) var(--ease-out);
      margin-bottom: var(--s-3);
      text-align: center;
    }
    .hero h1 {
      margin: 0 0 var(--s-1);
      font-size: var(--text-2xl);
      font-weight: 900;
      letter-spacing: -0.02em;
      line-height: 1.15;
    }
    .hero p {
      margin: 0;
      font-size: var(--text-sm);
      font-weight: 800;
      color: var(--ink-secondary);
    }

    /* ===== SECTION TITLE ===== */
    .section-title {
      margin: var(--s-4) 0 var(--s-2);
      text-align: center;
      font-size: var(--text-xs);
      font-weight: 900;
      color: var(--ink-secondary);
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }
    .section-title:first-of-type { margin-top: var(--s-2); }

    /* ===== TILE GRID ===== */
    .tile-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: var(--s-2);
      margin-bottom: var(--s-3);
    }

    .tile {
      aspect-ratio: 1.2;
      border: 3px solid var(--ink-primary);
      border-radius: var(--radius-md);
      padding: var(--s-2);
      background: rgba(0,0,0,0.02);
      text-decoration: none;
      color: inherit;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      cursor: pointer;
      transition: transform var(--motion-fast) var(--ease-out), box-shadow var(--motion-fast) var(--ease-out);
      touch-action: manipulation;
    }
    .tile:hover { transform: translateY(-1px); box-shadow: var(--shadow-soft); }
    .tile:active { transform: scale(0.97); box-shadow: none; }

    .tile-icon {
      width: 52px;
      height: 52px;
      border-radius: 12px;
      border: 2px solid var(--ink-primary);
      background: var(--bg-card);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      font-weight: 900;
    }

    .tile-title { font-size: var(--text-xl); font-weight: 900; letter-spacing: -0.01em; line-height: 1.1; }
    .tile-desc {
      margin-top: 2px;
      font-size: var(--text-xs);
      font-weight: 900;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--ink-secondary);
    }

    /* Tile accent colors */
    .tile[data-mod="math"]  { background: rgba(74,124,145,.12); }
    .tile[data-mod="deu"]   { background: rgba(196,114,108,.12); }
    .tile[data-mod="world"] { background: rgba(123,160,138,.12); }
    .tile[data-mod="logic"] { background: rgba(139,123,160,.12); }
    .tile[data-mod="crea"]  { background: rgba(212,165,116,.12); }
    .tile[data-mod="tools"] { background: rgba(125,155,143,.12); }

    /* ===== FOOTER ===== */
    footer {
      flex: 0 0 auto;
      padding: var(--s-2) var(--s-3);
      padding-bottom: max(var(--s-2), env(safe-area-inset-bottom));
      background: var(--bg-card);
      border-top: 3px solid var(--ink-primary);
      display: flex;
      flex-wrap: wrap;
      gap: var(--s-2);
    }

    /* ===== BUTTONS ===== */
    .btn {
      min-height: 48px;
      padding: 12px 14px;
      border-radius: 12px;
      border: 2px solid var(--ink-primary);
      background: var(--bg-card);
      color: var(--ink-secondary);
      font-family: var(--font);
      font-weight: 900;
      font-size: var(--text-sm);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: transform var(--motion-fast) var(--ease-out), box-shadow var(--motion-fast) var(--ease-out), filter var(--motion-fast) var(--ease-out);
      user-select: none;
      flex: 1 1 calc(50% - var(--s-2));
      text-decoration: none;
    }
    .btn:hover { transform: translateY(-1px); box-shadow: var(--shadow-soft); }
    .btn:active { transform: translateY(1px); box-shadow: none; }

    .btn.primary { background: var(--accent-math); color: var(--bg-card); }
    .btn.primary:hover { filter: brightness(1.05); }
    .btn.small { flex: 0 0 auto; padding: 10px 12px; }

    /* ===== OVERLAY & SHEET ===== */
    .overlay {
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,.26);
      display: none;
      align-items: flex-end;
      justify-content: center;
      padding: var(--s-3);
      z-index: 100;
    }
    .overlay.open { display: flex; }

    .sheet {
      width: 100%;
      max-width: 720px;
      max-height: 85vh;
      overflow-y: auto;
      border: 3px solid var(--ink-primary);
      border-radius: var(--radius-xl);
      background: var(--bg-card);
      box-shadow: var(--shadow-soft);
      padding: var(--s-3);
      animation: slideUp var(--motion-base) var(--ease-out);
    }

    .sheet h2 {
      margin: 0 0 var(--s-1);
      font-size: var(--text-xl);
      font-weight: 900;
      letter-spacing: -0.02em;
      text-align: center;
    }
    .sheet > p {
      margin: 0 0 var(--s-2);
      color: var(--ink-secondary);
      font-weight: 800;
      font-size: var(--text-sm);
      text-align: center;
    }

    .card {
      border: 3px solid var(--ink-primary);
      border-radius: var(--radius-lg);
      background: var(--bg-card);
      box-shadow: var(--shadow-subtle);
      padding: var(--s-3);
    }
    .card + .card { margin-top: var(--s-2); }
    .card.compact { border-width: 2px; }

    .card-label {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: var(--s-2);
      margin-bottom: var(--s-2);
    }
    .chip {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 2px solid var(--ink-primary);
      background: var(--bg-muted);
      font-weight: 900;
      font-size: var(--text-xs);
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: var(--ink-primary);
      user-select: none;
    }

    .title {
      margin: 0;
      font-size: var(--text-xl);
      font-weight: 900;
      letter-spacing: -0.02em;
      line-height: 1.2;
    }
    .muted {
      margin: var(--s-1) 0 0;
      font-size: var(--text-sm);
      font-weight: 800;
      color: var(--ink-secondary);
      white-space: pre-line;
    }

    .actions {
      display: flex;
      flex-wrap: wrap;
      gap: var(--s-2);
      margin-top: var(--s-3);
    }

    .row {
      display: flex;
      flex-wrap: wrap;
      gap: var(--s-2);
      justify-content: center;
    }

    .feedback {
      margin-top: var(--s-2);
      padding: 12px 14px;
      border-radius: 12px;
      border: 2px solid var(--ink-primary);
      background: var(--bg-muted);
      font-weight: 900;
      color: var(--ink-primary);
      display: flex;
      align-items: flex-start;
      gap: 10px;
    }
    .feedback .ficon { font-size: 18px; line-height: 1.2; }
    .feedback .ftext { font-size: var(--text-sm); font-weight: 900; color: var(--ink-secondary); }
    .feedback strong { color: var(--ink-primary); }

    /* ===== GRADE PICKER ===== */
    .grade-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: var(--s-2);
      margin-bottom: var(--s-2);
    }
    .grade-btn {
      min-height: 52px;
      border-radius: 12px;
      border: 2px solid var(--ink-primary);
      background: var(--bg-muted);
      font-family: var(--font);
      font-weight: 900;
      font-size: 18px;
      cursor: pointer;
      transition: transform var(--motion-fast) var(--ease-out), box-shadow var(--motion-fast) var(--ease-out);
    }
    .grade-btn:hover { transform: translateY(-1px); box-shadow: var(--shadow-soft); }
    .grade-btn:active { transform: scale(0.98); box-shadow: none; }
    .grade-btn.selected { background: var(--accent-math); color: white; }

    /* ===== PARENT GATE INPUT ===== */
    .parent-input {
      flex: 1 1 100%;
      min-height: 48px;
      border: 2px solid var(--ink-primary);
      border-radius: 12px;
      padding: 12px 14px;
      font: inherit;
      font-weight: 900;
    }

    /* ===== LEGAL LINKS (Elternbereich) ===== */
    .legal-links {
      display: flex;
      flex-wrap: wrap;
      gap: var(--s-2);
      margin-top: var(--s-2);
      padding-top: var(--s-2);
      border-top: 2px dashed var(--bg-muted);
    }
    .legal-links .btn {
      flex: 1 1 calc(50% - var(--s-2) / 2);
      background: var(--bg-muted);
      color: var(--ink-secondary);
    }

    /* ===== ANIMATIONS ===== */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes slideUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* ===== RESPONSIVE ===== */
    @media (max-width: 360px) {
      header { padding: 0 var(--s-2); }
      .viewport { padding: var(--s-2); }
      footer { padding: var(--s-2); }
      .tile-title { font-size: 18px; }
    }
  </style>
</head>

<body>
  <div id="app-frame">

    <!-- ===== HEADER ===== -->
    <header>
      <div class="brand">
        <div class="brand-title">Kidsneed</div>
        <div class="brand-subtitle">Grundschule Kl. 1‚Äì4</div>
      </div>

      <div class="top-actions">
        <div class="pill" id="grade-pill" title="Klasse w√§hlen" role="button" tabindex="0" aria-label="Klasse w√§hlen">
          <span class="icon">üìö</span>
          <span class="val" id="grade-val">Kl. 1</span>
        </div>
        <div class="pill" id="coins-pill" title="Punkte" role="button" tabindex="0" aria-label="Punkte anzeigen">
          <span class="icon">‚≠ê</span>
          <span class="val" id="coin-count">0</span>
        </div>
      </div>
    </header>

    <!-- ===== MAIN VIEWPORT ===== -->
    <main class="viewport">
      <!-- HERO -->
      <div class="hero">
        <h1>Alles an einem Ort.</h1>
        <p>W√§hle ein Modul. Klasse oben einstellen.</p>
      </div>

      <!-- LERNEN -->
      <div class="section-title">Lernen</div>
      <div class="tile-grid">
        <a class="tile" data-mod="math" href="./math/">
          <div class="tile-icon">‚àë</div>
          <div>
            <div class="tile-title">Mathe</div>
            <div class="tile-desc">Rechnen</div>
          </div>
        </a>

        <a class="tile" data-mod="deu" href="./deutsch/">
          <div class="tile-icon">Ab</div>
          <div>
            <div class="tile-title">Deutsch</div>
            <div class="tile-desc">Sprache</div>
          </div>
        </a>

        <a class="tile" data-mod="world" href="./welt/">
          <div class="tile-icon">üåç</div>
          <div>
            <div class="tile-title">Welt</div>
            <div class="tile-desc">Entdecken</div>
          </div>
        </a>

        <a class="tile" data-mod="logic" href="./logik/">
          <div class="tile-icon">‚óÜ</div>
          <div>
            <div class="tile-title">Logik</div>
            <div class="tile-desc">Denken</div>
          </div>
        </a>
      </div>

      <!-- DEUTSCH ¬∑ Best-of -->
      <div class="section-title">Deutsch</div>
      <div class="tile-grid">
        <a class="tile" data-mod="deu" href="./ueben/silben-klapper/">
          <div class="tile-icon">Si</div>
          <div>
            <div class="tile-title">Silben-Klapper</div>
            <div class="tile-desc">Silben</div>
          </div>
        </a>

        <a class="tile" data-mod="deu" href="./ueben/reim-radar/">
          <div class="tile-icon">Re</div>
          <div>
            <div class="tile-title">Reim-Radar</div>
            <div class="tile-desc">Reime</div>
          </div>
        </a>

        <a class="tile" data-mod="deu" href="./ueben/ie-ei-schalter/">
          <div class="tile-icon">ie</div>
          <div>
            <div class="tile-title">ie/ei-Schalter</div>
            <div class="tile-desc">ie/ei</div>
          </div>
        </a>

        <a class="tile" data-mod="deu" href="./ueben/satzbau-puzzle/">
          <div class="tile-icon">‚â°</div>
          <div>
            <div class="tile-title">Satzbau-Puzzle</div>
            <div class="tile-desc">Satzbau</div>
          </div>
        </a>

        <a class="tile" data-mod="deu" href="./ueben/artikel-trainer/">
          <div class="tile-icon">der</div>
          <div>
            <div class="tile-title">Artikel-Trainer</div>
            <div class="tile-desc">Artikel</div>
          </div>
        </a>
      </div>

      <!-- MATHE ¬∑ Best-of -->
      <div class="section-title">Mathe</div>
      <div class="tile-grid">
        <a class="tile" data-mod="math" href="./ueben/zahlenlinie/">
          <div class="tile-icon">#</div>
          <div>
            <div class="tile-title">Zahlenlinie</div>
            <div class="tile-desc">Zahlen</div>
          </div>
        </a>

        <a class="tile" data-mod="math" href="./ueben/zehner-bruecke/">
          <div class="tile-icon">10</div>
          <div>
            <div class="tile-title">Zehner-Br√ºcke</div>
            <div class="tile-desc">Zehner</div>
          </div>
        </a>

        <a class="tile" data-mod="math" href="./ueben/rechen-ampel/">
          <div class="tile-icon">‚úì</div>
          <div>
            <div class="tile-title">Rechen-Ampel</div>
            <div class="tile-desc">Pr√ºfen</div>
          </div>
        </a>

        <a class="tile" data-mod="math" href="./ueben/einmaleins-runden/">
          <div class="tile-icon">√ó</div>
          <div>
            <div class="tile-title">Einmaleins-Runden</div>
            <div class="tile-desc">Einmaleins</div>
          </div>
        </a>

        <a class="tile" data-mod="math" href="./ueben/kiosk-sachaufgaben/">
          <div class="tile-icon">üß∫</div>
          <div>
            <div class="tile-title">Kiosk-Sachaufgaben</div>
            <div class="tile-desc">Text</div>
          </div>
        </a>

        <a class="tile" data-mod="math" href="./ueben/uhr-coach/">
          <div class="tile-icon">‚è∞</div>
          <div>
            <div class="tile-title">Uhr-Coach</div>
            <div class="tile-desc">Uhr</div>
          </div>
        </a>
      </div>

      <!-- LOGIK ¬∑ Best-of -->
      <div class="section-title">Logik</div>
      <div class="tile-grid">
        <a class="tile" data-mod="logic" href="./ueben/muster-maschine/">
          <div class="tile-icon">‚ñ¶</div>
          <div>
            <div class="tile-title">Muster-Maschine</div>
            <div class="tile-desc">Muster</div>
          </div>
        </a>

        <a class="tile" data-mod="logic" href="./ueben/wenn-dann-detektiv/">
          <div class="tile-icon">‚Üí</div>
          <div>
            <div class="tile-title">Wenn-Dann-Detektiv</div>
            <div class="tile-desc">Wenn-Dann</div>
          </div>
        </a>

        <a class="tile" data-mod="logic" href="./ueben/kategorie-sortierer/">
          <div class="tile-icon">‚ñ°</div>
          <div>
            <div class="tile-title">Kategorie-Sortierer</div>
            <div class="tile-desc">Sortieren</div>
          </div>
        </a>

        <a class="tile" data-mod="logic" href="./ueben/labyrinth-tore/">
          <div class="tile-icon">‚ñ£</div>
          <div>
            <div class="tile-title">Labyrinth-Tore</div>
            <div class="tile-desc">Tore</div>
          </div>
        </a>

        <a class="tile" data-mod="logic" href="./ueben/aufmerksamkeits-check/">
          <div class="tile-icon">‚óé</div>
          <div>
            <div class="tile-title">Aufmerksamkeits-Check</div>
            <div class="tile-desc">Fokus</div>
          </div>
        </a>
      </div>

      <!-- KREATIV ¬∑ Best-of -->
      <div class="section-title">Kreativ</div>
      <div class="tile-grid">
        <a class="tile" data-mod="crea" href="./ueben/pixel-maler/">
          <div class="tile-icon">‚ñ©</div>
          <div>
            <div class="tile-title">Pixel-Maler</div>
            <div class="tile-desc">Pixel</div>
          </div>
        </a>

        <a class="tile" data-mod="crea" href="./ueben/sticker-werkstatt/">
          <div class="tile-icon">‚üÇ</div>
          <div>
            <div class="tile-title">Sticker-Werkstatt</div>
            <div class="tile-desc">Symmetrie</div>
          </div>
        </a>

        <a class="tile" data-mod="crea" href="./ueben/geschichten-karten/">
          <div class="tile-icon">‚ú∂</div>
          <div>
            <div class="tile-title">Geschichten-Karten</div>
            <div class="tile-desc">Story</div>
          </div>
        </a>

        <a class="tile" data-mod="crea" href="./kunst/">
          <div class="tile-icon">‚úé</div>
          <div>
            <div class="tile-title">Kunst</div>
            <div class="tile-desc">Malen</div>
          </div>
        </a>

        <a class="tile" data-mod="crea" href="./musik/">
          <div class="tile-icon">‚ô™</div>
          <div>
            <div class="tile-title">Musik</div>
            <div class="tile-desc">H√∂ren</div>
          </div>
        </a>
      </div>

      <!-- TOOLS -->
      <div class="section-title">Tools</div>
      <div class="tile-grid">
        <a class="tile" data-mod="tools" href="./ueben/mein-fortschritt/">
          <div class="tile-icon">‚òÖ</div>
          <div>
            <div class="tile-title">Mein Fortschritt</div>
            <div class="tile-desc">Status</div>
          </div>
        </a>

        <a class="tile" data-mod="tools" href="./rechner/">
          <div class="tile-icon">‚öô</div>
          <div>
            <div class="tile-title">Rechner</div>
            <div class="tile-desc">Berechnen</div>
          </div>
        </a>

        <a class="tile" data-mod="tools" href="./profil/">
          <div class="tile-icon">üë§</div>
          <div>
            <div class="tile-title">Profil</div>
            <div class="tile-desc">Einstellungen</div>
          </div>
        </a>
      </div>

      <!-- BEST-OF: DEUTSCH -->
      <div class="section-title">Deutsch</div>
      <div class="tile-grid">
        <a class="tile" data-mod="deu" href="./ueben/silben-klapper/">
          <div class="tile-icon">Si</div>
          <div>
            <div class="tile-title">Silben-Klapper</div>
            <div class="tile-desc">Silben</div>
          </div>
        </a>

        <a class="tile" data-mod="deu" href="./ueben/reim-radar/">
          <div class="tile-icon">Re</div>
          <div>
            <div class="tile-title">Reim-Radar</div>
            <div class="tile-desc">Reime</div>
          </div>
        </a>

        <a class="tile" data-mod="deu" href="./ueben/ie-ei-schalter/">
          <div class="tile-icon">ie</div>
          <div>
            <div class="tile-title">ie/ei-Schalter</div>
            <div class="tile-desc">ie/ei</div>
          </div>
        </a>

        <a class="tile" data-mod="deu" href="./ueben/satzbau-puzzle/">
          <div class="tile-icon">‚â°</div>
          <div>
            <div class="tile-title">Satzbau-Puzzle</div>
            <div class="tile-desc">Satzbau</div>
          </div>
        </a>

        <a class="tile" data-mod="deu" href="./ueben/artikel-trainer/">
          <div class="tile-icon">der</div>
          <div>
            <div class="tile-title">Artikel-Trainer</div>
            <div class="tile-desc">Artikel</div>
          </div>
        </a>
      </div>

      <!-- BEST-OF: MATHE -->
      <div class="section-title">Mathe √úbungen</div>
      <div class="tile-grid">
        <a class="tile" data-mod="math" href="./ueben/zahlenlinie/">
          <div class="tile-icon">#</div>
          <div>
            <div class="tile-title">Zahlenlinie</div>
            <div class="tile-desc">Zahlen</div>
          </div>
        </a>

        <a class="tile" data-mod="math" href="./ueben/zehner-bruecke/">
          <div class="tile-icon">10</div>
          <div>
            <div class="tile-title">Zehner-Br√ºcke</div>
            <div class="tile-desc">Zehner</div>
          </div>
        </a>

        <a class="tile" data-mod="math" href="./ueben/rechen-ampel/">
          <div class="tile-icon">‚úì</div>
          <div>
            <div class="tile-title">Rechen-Ampel</div>
            <div class="tile-desc">Pr√ºfen</div>
          </div>
        </a>

        <a class="tile" data-mod="math" href="./ueben/einmaleins-runden/">
          <div class="tile-icon">√ó</div>
          <div>
            <div class="tile-title">Einmaleins-Runden</div>
            <div class="tile-desc">Einmaleins</div>
          </div>
        </a>

        <a class="tile" data-mod="math" href="./ueben/kiosk-sachaufgaben/">
          <div class="tile-icon">üß∫</div>
          <div>
            <div class="tile-title">Kiosk-Aufgaben</div>
            <div class="tile-desc">Text</div>
          </div>
        </a>

        <a class="tile" data-mod="math" href="./ueben/uhr-coach/">
          <div class="tile-icon">‚è∞</div>
          <div>
            <div class="tile-title">Uhr-Coach</div>
            <div class="tile-desc">Uhr</div>
          </div>
        </a>
      </div>

      <!-- BEST-OF: LOGIK -->
      <div class="section-title">Logik √úbungen</div>
      <div class="tile-grid">
        <a class="tile" data-mod="logic" href="./ueben/muster-maschine/">
          <div class="tile-icon">‚ñ¶</div>
          <div>
            <div class="tile-title">Muster-Maschine</div>
            <div class="tile-desc">Muster</div>
          </div>
        </a>

        <a class="tile" data-mod="logic" href="./ueben/wenn-dann-detektiv/">
          <div class="tile-icon">‚Üí</div>
          <div>
            <div class="tile-title">Wenn-Dann-Detektiv</div>
            <div class="tile-desc">Wenn-Dann</div>
          </div>
        </a>

        <a class="tile" data-mod="logic" href="./ueben/kategorie-sortierer/">
          <div class="tile-icon">‚ñ°</div>
          <div>
            <div class="tile-title">Kategorie-Sortierer</div>
            <div class="tile-desc">Sortieren</div>
          </div>
        </a>

        <a class="tile" data-mod="logic" href="./ueben/labyrinth-tore/">
          <div class="tile-icon">‚ñ£</div>
          <div>
            <div class="tile-title">Labyrinth-Tore</div>
            <div class="tile-desc">Tore</div>
          </div>
        </a>

        <a class="tile" data-mod="logic" href="./ueben/aufmerksamkeits-check/">
          <div class="tile-icon">‚óé</div>
          <div>
            <div class="tile-title">Aufmerksamkeits-Check</div>
            <div class="tile-desc">Fokus</div>
          </div>
        </a>
      </div>

      <!-- BEST-OF: KREATIV -->
      <div class="section-title">Kreativ √úbungen</div>
      <div class="tile-grid">
        <a class="tile" data-mod="crea" href="./ueben/pixel-maler/">
          <div class="tile-icon">‚ñ©</div>
          <div>
            <div class="tile-title">Pixel-Maler</div>
            <div class="tile-desc">Pixel</div>
          </div>
        </a>

        <a class="tile" data-mod="crea" href="./ueben/sticker-werkstatt/">
          <div class="tile-icon">‚üÇ</div>
          <div>
            <div class="tile-title">Sticker-Werkstatt</div>
            <div class="tile-desc">Symmetrie</div>
          </div>
        </a>

        <a class="tile" data-mod="crea" href="./ueben/geschichten-karten/">
          <div class="tile-icon">‚ú∂</div>
          <div>
            <div class="tile-title">Geschichten-Karten</div>
            <div class="tile-desc">Story</div>
          </div>
        </a>
      </div>
    </main>

    <!-- ===== FOOTER ===== -->
    <footer>
      <button class="btn" id="reload-btn" type="button" aria-label="Neu laden" title="Neu laden">‚èª</button>
      <button class="btn primary" id="open-parent" type="button">üë®‚Äçüë©‚Äçüëß Eltern</button>
    </footer>

    <!-- ===== OVERLAY: KLASSE W√ÑHLEN ===== -->
    <div class="overlay" id="grade-overlay" role="dialog" aria-modal="true" aria-label="Klasse w√§hlen">
      <div class="sheet">
        <h2>Klasse w√§hlen</h2>
        <p>Damit Aufgaben und Hinweise besser passen.</p>
        <div class="grade-grid" id="grade-grid">
          <button class="grade-btn" data-grade="1" type="button">1</button>
          <button class="grade-btn" data-grade="2" type="button">2</button>
          <button class="grade-btn" data-grade="3" type="button">3</button>
          <button class="grade-btn" data-grade="4" type="button">4</button>
        </div>
        <div class="row">
          <button class="btn" id="close-grade" type="button">Schlie√üen</button>
        </div>
      </div>
    </div>

    <!-- ===== OVERLAY: ELTERNBEREICH ===== -->
    <div class="overlay" id="parent-overlay" role="dialog" aria-modal="true" aria-label="Elternbereich">
      <div class="sheet">
        <h2>Elternbereich</h2>
        <p>Sicherheitsfrage ‚Äì damit Kinder nicht aus Versehen etwas l√∂schen.</p>

        <div class="card compact">
          <div class="card-label">
            <span class="chip">üîí Sicherheitsfrage</span>
          </div>
          <p class="muted" id="pg-question" style="margin: 0 0 var(--s-2); font-size: var(--text-md); color: var(--ink-primary);">‚Ä¶</p>
          <div class="actions" style="margin-top: 0;">
            <input
              id="pg-input"
              class="parent-input"
              inputmode="numeric"
              pattern="[0-9]*"
              placeholder="Antwort eingeben"
              aria-label="Antwort eingeben"
            >
            <button class="btn primary" id="pg-unlock" type="button">Entsperren</button>
          </div>
        </div>

        <!-- Nach Entsperren sichtbar -->
        <div id="pg-unlocked" style="display: none;">
          <div class="feedback" style="margin-top: var(--s-2);">
            <div class="ficon">‚úÖ</div>
            <div class="ftext"><strong>Entsperrt.</strong> Du kannst jetzt Einstellungen √§ndern oder zur√ºcksetzen.</div>
          </div>

          <div class="card compact" style="margin-top: var(--s-2);">
            <div class="card-label">
              <span class="chip">‚öôÔ∏è Einstellungen</span>
            </div>
            <div class="actions" style="margin-top: 0;">
              <button class="btn" id="reset-all" type="button">‚ôªÔ∏è Alles zur√ºcksetzen</button>
              <button class="btn primary" id="close-parent" type="button">Schlie√üen</button>
            </div>
          </div>

          <!-- Impressum & Datenschutz -->
          <div class="legal-links">
  <a class="btn" href="https://humaneed.github.io/Impressum/" target="_blank" rel="noopener noreferrer" role="button">
    ‚ÑπÔ∏è Impressum
  </a>
  <a class="btn" href="https://humaneed.github.io/Datenschutz/" target="_blank" rel="noopener noreferrer" role="button">
    üîí Datenschutz
  </a>
</div>

        <div class="row" style="margin-top: var(--s-2);">
          <button class="btn" id="parent-cancel" type="button">Abbrechen</button>
        </div>
      </div>
    </div>

  </div>

  <script>
    (() => {
      'use strict';

      // ===== UTILITIES =====
      const $ = (sel) => document.querySelector(sel);
      const $$ = (sel) => document.querySelectorAll(sel);

      const LS = {
        coins: 'kidsneed_coins',
        grade: 'kidsneed_grade'
      };

      const clampGrade = (g) => {
        const n = parseInt(g, 10);
        return [1, 2, 3, 4].includes(n) ? n : 1;
      };

      const getInt = (key, fallback = 0) => {
        try {
          const v = localStorage.getItem(key);
          const n = v ? parseInt(v, 10) : fallback;
          return Number.isFinite(n) ? n : fallback;
        } catch { return fallback; }
      };

      const setStr = (key, val) => {
        try { localStorage.setItem(key, String(val)); } catch {}
      };

      const del = (key) => {
        try { localStorage.removeItem(key); } catch {}
      };

      const rand = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;

      // ===== HEADER =====
      const coinCountEl = $('#coin-count');
      const gradeValEl = $('#grade-val');
      const coinsPill = $('#coins-pill');
      const gradePill = $('#grade-pill');

      const updateHeader = () => {
        coinCountEl.textContent = getInt(LS.coins, 0);
        gradeValEl.textContent = `Kl. ${clampGrade(getInt(LS.grade, 1))}`;
        updateGradeSelection();
      };

      const bump = (el) => {
        if (!el) return;
        el.style.transform = 'scale(1.08)';
        setTimeout(() => { el.style.transform = ''; }, 160);
      };

      // Coins: nur anzeigen (kein Klick-Bonus hier)
      coinsPill?.addEventListener('click', () => {
        bump(coinsPill);
      });

      // ===== OVERLAYS =====
      const gradeOverlay = $('#grade-overlay');
      const parentOverlay = $('#parent-overlay');

      const openOverlay = (ov) => ov?.classList.add('open');
      const closeOverlay = (ov) => ov?.classList.remove('open');

      // Klasse w√§hlen
      gradePill?.addEventListener('click', () => openOverlay(gradeOverlay));
      gradePill?.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          openOverlay(gradeOverlay);
        }
      });

      $('#close-grade')?.addEventListener('click', () => closeOverlay(gradeOverlay));
      gradeOverlay?.addEventListener('click', (e) => {
        if (e.target === gradeOverlay) closeOverlay(gradeOverlay);
      });

      const updateGradeSelection = () => {
        const current = clampGrade(getInt(LS.grade, 1));
        $$('#grade-grid .grade-btn').forEach(btn => {
          const g = parseInt(btn.dataset.grade, 10);
          btn.classList.toggle('selected', g === current);
        });
      };

      $('#grade-grid')?.addEventListener('click', (e) => {
        const btn = e.target?.closest?.('[data-grade]');
        if (!btn) return;
        setStr(LS.grade, clampGrade(btn.dataset.grade));
        updateHeader();
        bump(gradePill);
        closeOverlay(gradeOverlay);
      });

      // Reload
      $('#reload-btn')?.addEventListener('click', () => window.location.reload());

      // ===== ELTERNBEREICH =====
      const pgQuestion = $('#pg-question');
      const pgInput = $('#pg-input');
      const pgUnlock = $('#pg-unlock');
      const pgUnlocked = $('#pg-unlocked');

      let pgA = 0, pgB = 0, pgAns = 0;

      const newParentQuestion = () => {
        pgA = rand(3, 9);
        pgB = rand(3, 9);
        pgAns = pgA * pgB;
        pgQuestion.textContent = `Wie viel ist ${pgA} √ó ${pgB}?`;
        pgInput.value = '';
        if (pgUnlocked) pgUnlocked.style.display = 'none';
      };

      $('#open-parent')?.addEventListener('click', () => {
        newParentQuestion();
        openOverlay(parentOverlay);
        setTimeout(() => pgInput?.focus(), 50);
      });

      $('#parent-cancel')?.addEventListener('click', () => closeOverlay(parentOverlay));
      $('#close-parent')?.addEventListener('click', () => closeOverlay(parentOverlay));

      parentOverlay?.addEventListener('click', (e) => {
        if (e.target === parentOverlay) closeOverlay(parentOverlay);
      });

      pgUnlock?.addEventListener('click', () => {
        const val = parseInt(pgInput.value, 10);
        if (val === pgAns) {
          if (pgUnlocked) pgUnlocked.style.display = 'block';
        } else {
          pgInput.value = '';
          pgInput.placeholder = 'Falsch ‚Äì nochmal versuchen';
          pgInput.focus();
        }
      });

      pgInput?.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          e.preventDefault();
          pgUnlock?.click();
        }
      });

      $('#reset-all')?.addEventListener('click', () => {
        if (!confirm('Wirklich alle Daten zur√ºcksetzen? (Punkte, Klasse)')) return;
        del(LS.coins);
        del(LS.grade);
        updateHeader();
        newParentQuestion();
        closeOverlay(parentOverlay);
      });

      // ESC schlie√üt Overlays
      window.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          closeOverlay(gradeOverlay);
          closeOverlay(parentOverlay);
        }
      });

      // ===== INIT =====
      updateHeader();
      console.log('‚úÖ Kidsneed geladen.');
    })();
  </script>
</body>
</html>
